# S1.01

## Gallerie

### Liste de fonctions

Embed as html and reduce font-size and change background or something so its clear its not the same content

```html
<h1 id="liste-des-fonctions-du-sudoku">Liste des fonctions du Sudoku</h1> <h2 id="grille">Grille</h2> <p>Fonctions et procédures de manipulation de grilles de Sudoku.</p> <h3 id="fonction-estgrillecomplète">Fonction <code>estGrilleComplète</code></h3> <p>Détermine si une grille est complète.</p> <p><strong>Paramètres</strong> :</p> <table> <thead> <tr> <th>nom</th> <th>mode</th> <th>type</th> <th>description</th> </tr> </thead> <tbody><tr> <td>grille</td> <td>entrée</td> <td><code>t_grilleEntier</code></td> <td>grille à tester</td> </tr> </tbody></table> <p><strong>Retour</strong> : <code>booléen</code> : <code>vrai</code> si la grille est complète, c&#39;est-à-dire que toutes les valeurs sont renseignées et placées correctement, <code>faux</code> sinon.</p> <h3 id="fonction-estvaleurinitiale">Fonction <code>estValeurInitiale</code></h3> <p>Détermine si la valeur spécifée correspond à une valeur initiale.</p> <p><strong>Paramètres</strong> :</p> <table> <thead> <tr> <th>nom</th> <th>mode</th> <th>type</th> <th>description</th> </tr> </thead> <tbody><tr> <td>valeur</td> <td>entrée</td> <td><code>entier</code></td> <td>valeur d&#39;une grille de Sudoku</td> </tr> </tbody></table> <p><strong>Retour</strong> : <code>booléen</code> : <code>vrai</code> si <em>valeur</em> correspond à une valeur déjà placée sur une grille de Sudoku au départ de la partie, <code>faux</code> sinon.</p> <h3 id="procédure-chargergrille">Procédure <code>chargerGrille</code></h3> <p>Initialise une grille à partir de la grille prédéfinie au numéro spécifié.</p> <p><strong>Paramètres</strong> :</p> <table> <thead> <tr> <th>nom</th> <th>mode</th> <th>type</th> <th>description</th> </tr> </thead> <tbody><tr> <td>numeroGrille</td> <td>entrée</td> <td><code>entier</code></td> <td>numéro de la grille prédéfinie à lire</td> </tr> <tr> <td>grille</td> <td>sortie</td> <td><code>t_grilleEntier</code></td> <td>grille à initialiser</td> </tr> </tbody></table>
```

### Algorithme pseudocode

```psc
/*
Raphaël BARDINI - 1C2

SAÉ 1.01 - Algorithme programme principal Sudoku
*/

programme Sudoku c'est
// Un jeu de Sudoku

    constante entier N := 3; // Facteur de taille de la grille
    constante entier NB_FICHIERS_GRILLES := 10;
    constante entier LONGUEUR_MAX_COMMANDE := 64;
    constante entier COTE_GRILLE := N * N;

    type t_grilleEntier = tableau[COTE_GRILLE][COTE_GRILLE] de entier;

début
    grilleJeu : t_grilleEntier;
    ligneCurseur, colonneCurseur : entier;
    partieAbandonnée : booléen;
    commandeRéussie : booléen;
    commande : chaîne(LONGUEUR_MAX_COMMANDE);

    partieAbandonnée := faux;
    ligneCurseur := 1;
    colonneCurseur := 1;

    chargerGrille(entE entierAléatoire(entE 1, entE NB_FICHIERS_GRILLES), sortE grilleJeu);

    // Boucle principale du jeu
    faire
        écrireGrille(entE grilleJeu);
        faire
            commande := entréeCommande();
            commandeRéussie := exécuterCommande(entE commande,
                                                entE/sortE grilleJeu,
                                                entE/sortE ligneCurseur,
                                                entE/sortE colonneCurseur,
                                                sortE partieAbandonnée);
        tant que (non commandeRéussie)
    tant que (non partieAbandonnée ET non estGrilleComplète(entE grilleJeu))

    // La partie n'a pas été abandonnée, elle s'est donc terminée par une victoire
    si (non partieAbandonnée) alors
        écrireEcran("Bravo, vous avez gagné !");
    finsi
fin
```

### Cahier de tests

```html
<h1 id="cahier-de-tests">Cahier de tests</h1>
<h2 id="1--chargement-du-fichier">1 : chargement du fichier</h2>
<p>test de la procédure <em>chargerGrille</em></p>
<p><strong>Contexte d&#39;exécution</strong> : aucun</p>
<p><strong>À effectuer</strong> : saisir un nom de fichier</p>
<table>
<thead>
<tr>
<th>N°</th>
<th>type</th>
<th>données entrées</th>
<th>résultat attendu</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>d&#39;erreur</td>
<td>ouverture du fichier impossible (le fichier n&#39;existe pas...)</td>
<td>grille inchangée</td>
</tr>
<tr>
<td>2</td>
<td>d&#39;erreur</td>
<td>le nom du fichier fait plus de 30 caractères</td>
<td>possible erreur de segmentation, grille inchangée</td>
</tr>
<tr>
<td>3</td>
<td>nominal</td>
<td>le fichier s&#39;ouvre correctement</td>
<td>grille remplie</td>
</tr>
</tbody></table>
<h2 id="2--affichage-de-la-grille">2 : affichage de la grille</h2>
<p>test de la procédure <em>afficherGrille</em></p>
<p><strong>Contexte d&#39;exécution</strong> : aucun</p>
<p><strong>À effectuer</strong> : rien</p>
<table>
<thead>
<tr>
<th>N°</th>
<th>type</th>
<th>données entrées</th>
<th>résultat attendu</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>particulier</td>
<td>grille vide (tout 0)</td>
<td>affichage correct</td>
</tr>
<tr>
<td>2</td>
<td>nominal</td>
<td>grille non vide</td>
<td>affichage correct</td>
</tr>
<tr>
<td>3</td>
<td>particulier</td>
<td>grille pleine (aucun 0)</td>
<td>affichage correct</td>
</tr>
</tbody></table>
<h2 id="3--saisie-coordonnées-dune-case">3 : saisie coordonnées d’une case</h2>
<p>test de la fonction <em>saisir</em></p>
<p><strong>Contexte d&#39;exécution</strong> : aucun</p>
<p><strong>À effectuer</strong> : saisir un entier</p>
<table>
<thead>
<tr>
<th>N°</th>
<th>type</th>
<th>données entrées</th>
<th>résultat attendu</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>erreur</td>
<td>pas un entier</td>
<td>message d&#39;erreur et 0 retourné</td>
</tr>
<tr>
<td>2</td>
<td>erreur</td>
<td>entier hors limites</td>
<td>message d&#39;erreur et 0 retourné</td>
</tr>
<tr>
<td>3</td>
<td>nominal</td>
<td>entier correct</td>
<td>valeur de l&#39;entier retourné</td>
</tr>
</tbody></table>
```

### Programme final

```c
int main()
{
    int valeur;     // valeur entrée
    int numLigne;   // numéro de ligne où insérer la valeur
    int numColonne; // numéro de colonne où insérer la valeur
    tGrille grille; // grille de jeu

    chargerGrille(grille);

    // nombre de valeurs insérées dans la grille
    // initialisé au nombre de valeurs initiales
    int nbValeursEntrees = nombreDeValeurs(grille);

    // boucle principale
    while (nbValeursEntrees < TAILLE * TAILLE) {
        afficherGrille(grille);

        printf("Indices de la case ?\n");
        printf("Ligne : ");
        saisir(&numLigne);
        printf("Colonne : ");
        saisir(&numColonne);

        // Les indices de tableau sont basés à 0 en C. Or l'utilisateur a entré des indices basés à 1.
        // Il faut donc décrémenter les indices entrés.
        numLigne--;
        numColonne--;

        if (grille[numLigne][numColonne] != VALEUR_VIDE) {
            printf("IMPOSSIBLE, la case n'est pas libre.\n");
        } else {
            printf("Valeur à insérer : ");
            saisir(&valeur);
            if (possible(grille, numLigne, numColonne, valeur)) {
                grille[numLigne][numColonne] = valeur;
                nbValeursEntrees++;
            }
        }
    }

    afficherGrille(grille); // afficher la grille complète

    printf("Grille pleine, fin de partie\n");

    return EXIT_SUCCESS;
}
```

### Tests

Test de la saisie utilisateurs (avec redirection de l'entrée standard)

```c
/**
 * @brief Tests Sudoku
 * @version 0.0.1
 * @date 13/11/2023
 * @author Raphaël BARDINI 1C2
 *
 * Programme de test pour le Sudoku
 */

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>

#define N 3

#define TAILLE (N * N)

void saisir(int *saisie)
{
    char entree[20];  // buffer d'entrée
    int entreeEntier; // entier entré converti
    bool erreurDeSaisie = true;

    while (erreurDeSaisie) {
        // scanf lira au maximum 19 caractères, et non pas 20,
        // car il faut conserver une place pour le caractère de fin de chaîne '\0'.
        scanf("%19s", entree);
        if (sscanf(entree, "%d", &entreeEntier) == 0) {
            printf("Veuillez saisir un entier : ");
        } else if (entreeEntier < 1 || entreeEntier > TAILLE) {
            printf("Veuillez saisir un entier entre 1 et %d : ", TAILLE);
        } else {
            erreurDeSaisie = false;
        }
    }

    *saisie = entreeEntier;
}

void casTestSaisir(int attendu)
{
    int recu;
    saisir(&recu);
    printf("\n%6s : %d -> %d\n", attendu == recu ? "SUCCÈS" : "ÉCHEC",
        attendu, recu);
}

int main()
{
    casTestSaisir(1);
    casTestSaisir(2);
    casTestSaisir(3);
    casTestSaisir(4);
    casTestSaisir(5);
    casTestSaisir(6);
    casTestSaisir(7);

    return EXIT_SUCCESS;
}
```
