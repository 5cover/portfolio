---
import ProjectsIndexPage from '../../components/pages/ProjectsIndexPage.astro';
import { getLangData, getLangs } from '../../lib/content';


export async function getStaticPaths() {
    const langs = await getLangs();
    return langs.map(lang => ({ params: { lang } }));
}

const { lang } = Astro.params;
if (!lang) {
    throw new Error('Missing lang param');
}

const langData = await getLangData(lang);
---

<ProjectsIndexPage
    lang={lang}
    langData={langData}
    copy={{
        projectSearchSearch: langData.projectSearchSearch,
        projectSearchPlaceholder: langData.projectSearchPlaceholder,
        projectSearchTags: langData.projectSearchTags,
        projectSearchSort: langData.projectSearchSort,
    }}
/>
