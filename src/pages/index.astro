---
import { getLangs } from '../lib/content';

const langs = await getLangs();
const fallbackLang = langs[0] ?? 'fr';
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redirectingâ€¦</title>
  </head>
  <body>
    <script is:inline define:vars={{fallbackLang, langs}}>
      const browserLangs = navigator.languages || [navigator.language];
      const normalized = browserLangs
        .map((value) => (value || '').split('-')[0])
        .filter(Boolean);
      const match = normalized.find((value) => langs.includes(value));
      const target = match || fallback;
      window.location.replace(`/portfolio/${target}/index.html`);
    </script>
  </body>
</html>
